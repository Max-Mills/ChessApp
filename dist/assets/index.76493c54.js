import{o as s,c as h,a as y,F as f,r as v,n as m,b,d as w}from"./vendor.b887ba3a.js";const k=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function t(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerpolicy&&(o.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?o.credentials="include":e.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=t(e);fetch(e.href,o)}};k();class x{constructor(l,t){this.org=l,this.final=t,this.piece=l.piece,this.xo=l.loc[1],this.xf=t.loc[1],this.xd=this.xf-this.xo,this.yo=l.loc[0],this.yf=t.loc[0],this.yd=this.yf-this.yo}getMovementRules(){if(this.org.player==this.final.player)return console.log("same player piece"),this.valid=!1;switch(this.piece){case"knight":this.knightMovement();break;case"rook":this.rookMovement();break;case"bishop":this.bishopMovement();break;case"queen":this.queenMovement();break;case"king":this.kingMovement();break;case"pawn":this.pawnMovement();break;default:return console.log("Somethinga wenta wronga"),this.valid=!1}return this.valid}invalid(){return console.log("invalid move"),this.valid=!1}knightMovement(){if(Math.abs(this.xd)+Math.abs(this.yd)==3&&Math.abs(Math.abs(this.xd)-Math.abs(this.yd))==1)return this.valid=!0;this.invalid()}bishopMovement(){if(Math.abs(this.xd)==Math.abs(this.yd))return this.valid=!0;this.invalid()}rookMovement(){if(this.xd==0&&this.yd!=0||this.yd==0&&this.xd!=0)return this.valid=!0;this.invalid()}queenMovement(){if(this.bishopMovement()||this.rookMovement())return this.valid=!0;this.invalid()}kingMovement(){if((Math.abs(this.xd)==1||Math.abs(this.yd)==1)&&(this.bishopMovement()||this.rookMovement()))return this.valid=!0;this.invalid()}pawnMovement(){if(this.org.player=="b"&&(this.yd==1&&this.xd==0||this.yo==2&&this.yd==2)||this.org.player=="w"&&(this.yd==-1&&this.xd==0||this.yo==7&&this.yd==-2))return this.valid=!0;this.invalid()}}var _=[{loc:[1,1],piece:"rook",player:"b"},{loc:[1,2],piece:"knight",player:"b"},{loc:[1,3],piece:"bishop",player:"b"},{loc:[1,4],piece:"queen",player:"b"},{loc:[1,5],piece:"king",player:"b"},{loc:[1,6],piece:"bishop",player:"b"},{loc:[1,7],piece:"knight",player:"b"},{loc:[1,8],piece:"rook",player:"b"},{loc:[2,1],piece:"pawn",player:"b"},{loc:[2,2],piece:"pawn",player:"b"},{loc:[2,3],piece:"pawn",player:"b"},{loc:[2,4],piece:"pawn",player:"b"},{loc:[2,5],piece:"pawn",player:"b"},{loc:[2,6],piece:"pawn",player:"b"},{loc:[2,7],piece:"pawn",player:"b"},{loc:[2,8],piece:"pawn",player:"b"},{loc:[3,1],piece:"none",player:""},{loc:[3,2],piece:"none",player:""},{loc:[3,3],piece:"none",player:""},{loc:[3,4],piece:"none",player:""},{loc:[3,5],piece:"none",player:""},{loc:[3,6],piece:"none",player:""},{loc:[3,7],piece:"none",player:""},{loc:[3,8],piece:"none",player:""},{loc:[4,1],piece:"none",player:""},{loc:[4,2],piece:"none",player:""},{loc:[4,3],piece:"none",player:""},{loc:[4,4],piece:"none",player:""},{loc:[4,5],piece:"none",player:""},{loc:[4,6],piece:"none",player:""},{loc:[4,7],piece:"none",player:""},{loc:[4,8],piece:"none",player:""},{loc:[5,1],piece:"none",player:""},{loc:[5,2],piece:"none",player:""},{loc:[5,3],piece:"none",player:""},{loc:[5,4],piece:"none",player:""},{loc:[5,5],piece:"none",player:""},{loc:[5,6],piece:"none",player:""},{loc:[5,7],piece:"none",player:""},{loc:[5,8],piece:"none",player:""},{loc:[6,1],piece:"none",player:""},{loc:[6,2],piece:"none",player:""},{loc:[6,3],piece:"none",player:""},{loc:[6,4],piece:"none",player:""},{loc:[6,5],piece:"none",player:""},{loc:[6,6],piece:"none",player:""},{loc:[6,7],piece:"none",player:""},{loc:[6,8],piece:"none",player:""},{loc:[7,1],piece:"pawn",player:"w"},{loc:[7,2],piece:"pawn",player:"w"},{loc:[7,3],piece:"pawn",player:"w"},{loc:[7,4],piece:"pawn",player:"w"},{loc:[7,5],piece:"pawn",player:"w"},{loc:[7,6],piece:"pawn",player:"w"},{loc:[7,7],piece:"pawn",player:"w"},{loc:[7,8],piece:"pawn",player:"w"},{loc:[8,1],piece:"rook",player:"w"},{loc:[8,2],piece:"knight",player:"w"},{loc:[8,3],piece:"bishop",player:"w"},{loc:[8,4],piece:"king",player:"w"},{loc:[8,5],piece:"queen",player:"w"},{loc:[8,6],piece:"bishop",player:"w"},{loc:[8,7],piece:"knight",player:"w"},{loc:[8,8],piece:"rook",player:"w"}];class M{constructor(){self=this,this.totalTiles=self.buildBoard(),this.pieceLocation=_,this.selectedTile=65}buildBoard(){return self.totalTiles=[...Array(9).keys()],self.totalTiles.shift(),self.totalTiles}getIndex(l,t){var i=(l-1)*8+t-1;return i}getPiece(l,t,i){var e=self.getIndex(l,t),o="assets/"+i[e].player+i[e].piece+".png";return o}selected(l,t,i){var e=self.getIndex(l,t);if(this.selectedTile!=65&&self.isValid(this.selectedTile,i,e)){var o=this.selectedTile;const n=p=>new Promise(d=>setTimeout(d,p));(async()=>{self.animatePiece(this.selectedTile,e),await n(750),this.selectedTile=o,document.getElementById("img"+this.selectedTile).style.transform=null,i[e].piece=i[this.selectedTile].piece,i[e].player=i[this.selectedTile].player,i[this.selectedTile].piece="none",i[this.selectedTile].player=""})();return}if(i[e].piece!="none")return this.selectedTile=e,this.selectedTile}isValid(l,t,i){return l!=null&&i!=l&&new x(t[l],t[i]).getMovementRules()==!0&&(t[l].piece=="knight"||self.checkPath(t[l],t[i])==!0)}animatePiece(l,t){var i=document.getElementById("tile"+t).getBoundingClientRect(),e=document.getElementById("img"+l);e.style.transform="translateY("+(i.y-e.getBoundingClientRect().y+1)+"px)",e.style.transform+="translateX("+(i.x-e.getBoundingClientRect().x+2.5)+"px)"}checkPath(l,t){for(var i=l.loc[0],e=l.loc[1],o=i-t.loc[0]>0,n=!0,c=t.loc[1]-e>0,p=i-t.loc[0]==0,d=t.loc[1]-e==0,u=!0;!(i==t.loc[0]&&e==t.loc[1]);){var g=self.getIndex(i,e);if(o==!0&&!p&&i--,o==!1&&!p&&i++,c==!0&&!d&&e++,c==!1&&!d&&e--,this.pieceLocation[g].piece!="none"&&u==!1)return console.log("piece is in the way"),n=!1;u=!1}return n}}var T=(r,l)=>{for(const[t,i]of l)r[t]=i;return r},a=new M;const B={data(){return{pieceLocation:a.pieceLocation,totalTiles:a.totalTiles,selectedTile:a.selectedTile,getIndex:a.getIndex.bind({}),getPiece:a.getPiece.bind({}),selected:a.selected.bind({})}}},I={class:"boardBorder"},L={class:"board"},P={class:"row"},A=["id","onClick"],C=["src","id"];function q(r,l,t,i,e,o){return s(),h("div",I,[y("table",L,[(s(!0),h(f,null,v(e.totalTiles,n=>(s(),h("tr",P,[(s(!0),h(f,null,v(e.totalTiles,c=>(s(),h("td",{id:"tile"+e.getIndex(n,c),onClick:p=>e.selectedTile=e.selected(n,c,e.pieceLocation,e.selectedTile),class:"column"},[y("div",{class:m({active:e.getIndex(n,c)==e.selectedTile})},[y("img",{src:e.getPiece(n,c,e.pieceLocation),id:"img"+e.getIndex(n,c)},null,8,C)],2)],8,A))),256))]))),256))])])}var E=T(B,[["render",q]]);const F={setup(r){return(l,t)=>(s(),b(E))}};w(F).mount("#app");
